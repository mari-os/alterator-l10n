<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
  </head>
  <body>
    <h2>Управление конфигурацией</h2>

    <p>Модуль предназначен для централизованного массового управления 
    конфигурациями компьютерами под управлением Linux по протоколу SSH.</p>

    <p>Требования к управляемым хостам — должен быть установлен пакет
    <i>alterator-mass-management</i> и для хостов, доступных напрямую, запущена
    служба <i>sshd</i> на порту 22.</p>

    <h3>Возможности:</h3>

    <ul>
    <li>Поддержка нескольких групп хостов, указываемых по доменному имени или адресу IP;</li>
    <li>Возможность управления хостами за NAT (непрямой доступ);</li>
    <li>Управление через SSH через публичную часть ключа, создаваемого на сервере;</li>
    <li>Составление профилей изменений с одной или несколькими подзадачами на изменения;</li>
    <li>Применение профиля на группу хостов с контролем доступности и успешности применения изменений;</li>
    <li>Многопоточное применение изменений (по умолчанию 5 потоков);</li>
    <li>Повторный запуск задания только на недоступных хостах и хостах с возникшими ошибками;</li>
    <li>Показ отчётов по заданиям, попыткам, хостам и подзаданиям;</li>
    <li>Экспорт и импорт групп хостов.</li>
    </ul>

    <h3>Выбор режима</h3>
    
    <p>В начале работы необходимо определить режим работы хоста. Сделать это
    можно на вкладке «Режим»:</p>
    
    <p><strong>Мастер</strong> — режим управления хостами и предоставления
    данных и сборка отчётов для хостов с непрямым доступом.</p>

    <p><strong>Управляемый хост с прямым доступом</strong> — режим управляемого 
    хоста, доступного с мастер-хоста по протоколу SSH. На управляемый хост с 
    прямым доступом в разделе Пользователи — Администратор системы загрузите в
    разрешённые ssh ключи файл открытой части ключа.</p>
    
    <p><strong>Управляемый хост с непрямым доступом</strong> — режим управляемого 
    хоста, недоступного с мастер-хоста, до имеющего доступ на сам мастер-хост. 
    На мастер-хост необходимо при создании группы с непрямым доступом загрузить
    открытую часть ключа этого хоста, получаемую при нажатии кнопки «Забрать 
    публичную часть ключа хоста». Для хостов в этом режиме необходимо указать 
    адрес мастер-хоста, группу хостов непрямого доступа на нём. в которую 
    входит этот хост и интервал обновления в минутах.</p>

    <h3>Создание группы хостов</h3>

    <p>Перейдите в раздел Сеть — Управление конфигурацией — Группы хостов. 
    Нажмите кнопку «Забрать публичную часть ключа хоста». 
    Вам будет предложено загрузить открытую часть ключа. Сохраните
    предложенный файл. На той же вкладке создайте группу, выберите её в списке
    слева и добавьте хосты по доменному имени, доступному на управляющем
    сервере, или адресу IP. Вы можете импортировать хосты из текстового файла
    (по одному имени или адресу в строке).</p>
    
    <p>Группа хостов с непрямым доступом создаётся при включенном флажке 
    «Непрямой доступ к хостам». После этого в группу добавляются ключи 
    управляемых хостов.</p>

    <h3>Создание профиля</h3>

    <p>Создайте профиль на вкладке «Профили». Перейдите в необходимый раздел
    изменений. Установите необходимые параметры и обязательно включите первый в 
    разделе флажок «Изменить параметры...», без этого подзадание по этому 
    разделу не будет подготовлено, только сохранены параметры. Сохраните 
    профиль.</p>

    <h3>Запуск и просмотр задания</h3>

    <p>Перейдите на вкладку «Задания» и нажмите кнопку «Новое задание». 
    Выберите группу хостов и профиль. Нажмите кнопку «Запустить новое 
    задание». Через некоторое время в таблице заданий слева появится новая 
    строка с результатом выполнения.</p>

    <p>Для того, чтобы посмотреть детали выполнения задания, щелкните на строку 
    таблицы заданий. Справа появится таблица с результатами попыток и кнопкой 
    «Перезапустить задание». При щелчке на строке попытки появится окно с 
    результатами выполнения задания по хостам. При щелчке на хосте появится 
    таблица с результатами применения подзаданий</p>

  </body>
</html>
