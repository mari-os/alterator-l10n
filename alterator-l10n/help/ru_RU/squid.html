<!-- (C) 2009 Paul Wolneykien <manowar@altlinux.ru> -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
  </head>
  <body>
    <h2>Прокси-сервер</h2>

    <h3>Настройка прокси-сервера</h3>

    <p>Несколько компьютеров, объединённых в локальную сеть
    могут быть подключены к глобальной сети (Интернет) через один общий
    канал. Такое решение имеет ряд преимуществ перед другими.
    В частности, если разместить в месте соединения двух сетей
    (<em>шлюзе</em>) прокси-сервер, полученные через него страницы
    попадут в кеш, и при повторном обращении к ним загрузка из внешней
    сети уже не потребуется. Это может существенно ускорить доступ к
    популярным сайтам и снизить потребляемый организацией
    <em>трафик</em>.</p>

    <p>Прокси-сервер принимает запросы из локальной сети и, по мере
    необходимости, передаёт их во внешнюю сеть. Поступление запроса
    ожидается на определённом <em>порту</em>, который по умолчанию имеет
    стандартный номер 3128. Если по каким-то причинам не желательно
    использовать данный порт, то можно поменять его значение на любое
    другое.</p>
      
    <p>Перед тем как выполнить перенаправление запроса, прокси-сервер
    проверяет принадлежность сетевого адрес узла, с которого запрос был
    отправлен к группе внутренних сетевых адресов. Для того, чтобы
    запросы, отправленные из локальной сети, обрабатывались
    прокси-сервером, необходимо добавить соответствующую группу адресов
    (адрес подсети и адресную маску) в список внутренних сетей
    в разделе <em>Сети</em>.</p>
    
    <p>Вторым условием передачи запроса является принадлежность
    <em>целевого порта</em> к разрешённому диапазону. Посмотреть и
    отредактировать список разрешённых целевых портов можно в разделе
    <em>Порты</em>.</p>

    <p>Прокси-сервер может работать в двух режимах: <em>стандартном</em>
    и <em>прозрачном</em>. Стандартный режим использование прокси-сервера
    требует изменения режима работы программ локальной сети, что может
    потребовать их ручной настройки. По этой причине, другим популярным
    режимом использования прокси-сервера является прозрачный режим.
    В этом режиме все обращения из внутренней сети к зарегистрированным
    службам (портам) во внешней сети автоматически перехватываются
    прокси-сервером при прохождении через шлюз. Программы в локальной
    сети при этом продолжают работать в обычном режиме не требуя никакой
    специальной настройки. Недостатком прозрачного режима работы
    является невозможность идентификации пользователей -- все запросы
    отправляются из локальной сети анонимно.</p>

    <p>Преимуществом непрозрачного режима работы, требующего
    перенастройки программ локальной сети, является возможность
    производить аутентификацию пользователей и контролировать их доступ
    во внешнюю сеть. Для того, чтобы включить аутентификацию, выберите
    <em>способ аутентификации</em>, отличный от "Без аутентификации".
    </p>

    <p>Политика доступа пользователей во внешнюю сеть формируется на
    основе групп пользователей и сетевых доменов в
    разделе <em>Группы</em>. Для каждой группы пользователей может
    быть сформирован список доменов, к которым разрешается (или
    наоборот, запрещается) обращение. Внесение и исключение
    пользователей из групп производится с помощью общесистемного
    модуля "Пользователи/Группы".</p>

    <h3>Просмотр статистики работы прокси-сервера</h3>
    <p>Пересылка каждого запроса во внешнюю сеть фиксируется
    прокси-сервером в специальном журнале. На основании этих данных
    периодически формируются отчёты о статистике использования
    ресурсов сети, в том числе потраченного времени и количества
    переданных данных (трафика). С этими отчётами администратор
    может ознакомиться в модуле <em>Статистика/Прокси-сервер</em>.</p>

    <p>В том случае, если на прокси-сервере производилась
    аутентификация пользователей, отчёты будут содержать данные об
    обращениях каждого пользователя. Иначе отчёты будут формироваться
    только на основании адресов локальной сети.</p>

    <p>При регулярном использовании ресурсов глобальной сети, объём
    статистических данных постоянно возрастает. Для того, чтобы сделать
    отчёты более простыми и сэкономить дисковое пространство,
    статистические данные суммируются при их устаревании. Всего
    формируется 4 отчёта: <em>за сегодняшний день</em>, <em>за последнюю
    неделю</em>, <em>за последний месяц</em> и суммарная статистика за
    всё время работы сервера.</p>

    <p>На формирование отчётов тратится некоторое время и
    вычислительные мощности сервера, поэтому данные статистики
    недоступны в режиме реального времени. Отчёты формируются
    периодически, период может быть установлен от 5 до 45 минут. Кроме
    того, при необходимости отчёты могут быть сформированы по
    требованию (кнопка <em>Обновить сейчас</em>).</p>

  </body>
</html>
